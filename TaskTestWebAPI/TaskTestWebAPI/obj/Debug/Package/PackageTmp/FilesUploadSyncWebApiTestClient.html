<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script type="text/javascript">
		var oldActionAttribute = "";
		
		function MyOnSubmit()
		{
			if (oldActionAttribute != "")
				document.getElementById("MyForm").action = oldActionAttribute;
				
			var currentPage = window.location.href;
			var currentPageSite = currentPage.substring(0, currentPage.lastIndexOf("/"));
			var currentActionAttribute = document.getElementById("MyForm").action;
			var hostName = window.location.hostname;
			var pos = currentActionAttribute.indexOf(hostName)
			var currentActionAttributePlain = currentActionAttribute.substring(currentActionAttribute.indexOf("/", pos + 1));
			oldActionAttribute = document.getElementById("MyForm").action;
			document.getElementById("MyForm").action = currentPageSite + currentActionAttributePlain;
			alert(document.getElementById("MyForm").action);
		}
    </script>
</head>
<body>
    <form id="MyForm" action="/api/FilesUploadSync" method="post" enctype="multipart/form-data" onsubmit="MyOnSubmit()">
        <label for="somefile">File</label>
        <input name="somefile" type="file" multiple />
        <input type="submit" value="Submit" />
    </form>
</body>
</html>
